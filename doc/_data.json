{
    "version": "0.6",
    "pageContent": 
	{
        "_comments": "JSON object that contains data for page labels, buttons, etc.",
        "navItems": 
		{
            "_common": 
			{
                "buttonBackToGallery": 
				{
                    "name": "Back To Gallery",
					"method": "backToGallery()",
					"idName": "backToGallery"	
                },
                "buttonStartTutorial": 
				{
                    "name": "Start Tutorial",
					"method": "startTutorialFromDetailsScreen()",
					"idName": "startTutorial"
                },
				"buttonViewDetails": 
				{
                    "name": "View Details",
					"method": "viewDetails()",
					"idName": "stepsViewDetails"	
                }
            }
        }
    },
    "tutorial": 
	{
        "_common": 
		{
            "name": "LoopBack Request node",
            "shortDescription": "Learn how to use the LoopBackRequest nodes",
            "durationText": "This tutorial takes approximately",
            "durationTime": "20 minutes",
            "_resourceToOpenComment": "The ID of the first resource to open when the user imports the tutorial. Resource IDs are defined in the repo_metadata.json Tutorials listing on ot4i.",
            "resourceToOpen": "EventRoutingFlow",
            "helpLink": 
			{
                "text": "IBM Knowledge Center",
                "link": "/com.ibm.etools.msgbroker.helphome.doc/help_home_msgbroker.htm"
            }
        },
        "pageDetails": 
		{
            "topicsName": "Tutorial Topics",
            "_topicListComment": "A short list of product concepts or tasks demonstrated by this tutorial",
            "topicList": 
			[
                {
                    "title": "LoopBack Request node"
                },
                {
                    "title": "Cloudant DB"
                }
            ],
            "outcomesName": "Learning outcomes",
            "_outcomesComment": "A description of what the user will have learned or accomplished by running this tutorial.",
            "outcomeList": 
			[
                {
                    "title": "To understand how to make remote calls between message flows that use a LoopBackRequest node and a Cloudant database"
                }
            ],
            "summary": 
			{
                "overviewName": "OVERVIEW",
                "_overviewComment": "A short description of what happens in this tutorial, and an optional short explanation of the IIB concepts used in this tutorial if necessary for context. What background knowledge must the user have for this to make sense?",
                "sections": 
				[
                    {
                        "section": "This tutorial shows how LoopBack Request nodes can be used to retrieve and add data to a database.  The example uses an application which provides two message flows: one for retrieving documents and one for adding documents to a NoSQL Cloudant database."
                    },
                    {
                        "section": "It also shows how connectors from the LoopBack framework can be used to carry this out."
                    },
                    {
                        "section": "The tutorial can be extended to create flows that retrieve data from one database (ie MongoDB), then performs some operation on the data before storing it in another database (ie Cloudant)."
                    }
                ]
            },
			"helpLinks": 
			{
				"_helpLinksComment": "Helplinks that have a type:web attribute are rendered as web links. Otherwise, links are assumed to be to embedded Help topics in the Knowledge Center.",
				"title": "Find out more",
				"details": 
				[
					{
						"title": "Basic introduction to using LoopBackRequest nodes ",
						"description": "LoopBackRequest nodes Introduction",
						"link": "https://developer.ibm.com/integration/blog/2016/09/01/basic-introduction-to-using-the-loopbackrequest-node/",
						"type": "web"
					},
					{
						"title": "More detailed LoopBackRequest Node tutorial",
						"description": "LoopBackRequest node Tutorial",
						"link": "https://developer.ibm.com/integration/blog/2016/10/13/iib-v10-0-0-6-loopback-request-node-tutorial/",
						"type": "web"
					}
				]
			}
        },
        "pageSteps": 
		{
            "create": 
			{
                "overview": 
				{
                    "name": "Create",
                    "heading": "Import projects",
                    "_createComment": "A description of what will happen when the user clicks Import.",
                    "sections": 
					[
                        {
                            "section": "When you click Import, an application will be created in your workspace: <span class='application'>LoopBack</span>."
                        },
                        {
                            "section": "<span class='msgflow'>create.msgflow</span> and <span class='msgflow'>retrieve.msgflow</span> each implement a single message flow with a HTTPInput, LoopBackRequest node and HTTPReply node. In this tutorial, these two applications will run in the same integration server. With additional configuration they can run on different servers or even on different machines."
                        },
                        {
                            "section": "The difference between the two message flows is quite small.  The HTTP Input for <span class='msgflow'>create.msgflow</span> has a path suffix '/create', where as the one for <span class='msgflow'>retrieve.msgflow</span> is '/retrieve'."
                        },
                        {
                            "section": "The LoopBackRequest node for <span class='msgflow'>create.msgflow</span> has the 'create' operation selected, where as the one for <span class='msgflow'>retrieve.msgflow</span> is 'retrieve'."
                        },
			{
			    "section": "These are explained in more detail when you move on to the Prepare tab, along with setup steps you need to complete before running the flows."
			}
                    ]
                },
                "helpLinks": 
				{
                    "title": "Find out more",
                    "details": 
					[
                        {
                            "title": "Basic introduction to using LoopBackRequest nodes ",
                            "description": "LoopBackRequest nodes Introduction",
                            "link": "https://developer.ibm.com/integration/blog/2016/09/01/basic-introduction-to-using-the-loopbackrequest-node/",
                            "type": "web"
                        },
                        {
                            "title": "More detailed LoopBackRequest Node tutorial",
                            "description": "LoopBackRequest node Tutorial",
                            "link": "https://developer.ibm.com/integration/blog/2016/10/13/iib-v10-0-0-6-loopback-request-node-tutorial/",
                            "type": "web"
                        }
                    ]
                },
                "actions": 
				{
                    "title": "Create Actions",
                    "details": 
					[
                        {
                            "name": "Import",
                            "method": "importArtifacts()"
                        }
                    ]
                }
            },
            "prepare": 
			{
                "overview": 
				{
                    "name": "Prepare",
                    "heading": "Imported projects",
                    "_prepareComment": "A description of what just happened when the user clicked Import, and what will happen when the user clicks Deploy.",
                    "sections": 
					[
                        {
                            "section": "Look inside application <span class='application'>Loopback</span>. There are two flows that should be visible <span class='msgflow'>retrieve</span> and <span class='resource'>create</span>. The LoopBackRequest nodes in both flows are configured to reference a data source name of 'CLOUDANT', a LoopBack object of 'share_price' and a security identity of CLOUDANT_SEC_ID, to avoid putting in plaintext credentials."
                        },
                        {
                            "section": "In both cases, a HTTP call is used with the LoopBackRequest node to contact the Cloudant database and perform some action, which can be viewed on the HTTP Reply."
                        },
                        {
                            "section": "To allow the message flows to connect to the Cloudant database, there are some additional steps.",
                            "steps": 
							{
                                "type": "ordered",
                                "details": 
								[
                                    {
                                        "details": "Sign into bluemix and create a new database."
                                    },
                                    {
                                        "details": "Then make sure that there is a datasources.json file in the connectors/loopback folder (located in the IIB folder ie /Program Files/IBM/IIB/10.0.0.7/connectors/loopback), otherwise create one. This is where the details for backend systems are stored, which is what we need for the cloudant connection."
                                    },
                                    {
                                        "details": "Install the loopback connector for cloudant: npm install loopback-connector-cloudant –save."
				    },
				    {
                                        "details": "Go back to Bluemix and find the username and password that are listed for the Cloudant service."
				    },
				    {
                                        "details": "Use mqsisetdbparamas to like these credentials to the username and password that were just found."
				    },
				    {
                                        "details": "Set the config for the request node by adding a stanza to the datasources.json file:{ 'CLOUDANT': {'database': 'share_price','name': 'CLOUDANT','port': 443,'connector': 'cloudant'}}"
					}
                                ]
                            }
                        },
			{
			    "section":"The application providing LoopBackRequest nodes are built into a BAR file <span class='resource'>loopback_nodes.bar</span>. Deploy these now, using the link on the right of this page. Once you have done that, move on to the Run tab to exercise the flows and see them working."
                        }
                    ]
                },
                "helpLinks": 
				{
                    "title": "Find out more",
                    "details": 
					[
                        {
                            "title": "Basic introduction to using LoopBackRequest nodes ",
                            "description": "LoopBackRequest nodes Introduction",
                            "link": "https://developer.ibm.com/integration/blog/2016/09/01/basic-introduction-to-using-the-loopbackrequest-node/",
                            "type": "web"
                        },
                        {
                            "title": "More detailed LoopBackRequest Node tutorial",
                            "description": "LoopBackRequest node Tutorial",
                            "link": "https://developer.ibm.com/integration/blog/2016/10/13/iib-v10-0-0-6-loopback-request-node-tutorial/",
                            "type": "web"
                        }
                    ]
                },
                "actions": 
				{
                    "title": "Prepare Actions",
                    "details": 
					[
                        {
                            "name": "Deploy",
                            "method": "deployArtifacts()"
                        }
                    ]
                }
            },
            "run": 
			{
                "overview": 
				{
                    "name": "Run",
                    "heading": "Follow these steps to complete the tutorial",
                    "_runComment": "The full steps for the user to run through the tutorial. Use 'sections' to render paragraphs, 'steps' with a type of 'ordered' or 'unordered' to render HTML lists, and 'substeps' to render nested lists.",
                    "sections": 
					[
                        {
                            "section": "Use the <span class='resource'>create.msgflow</span> in application <span class='application'>Loopback</span> to run this tutorial. You should have already deployed the <span class='resource'>loopback_nodes.bar</span> to the default integration server on your TESTNODE.",
                            "steps": 
							{
                                "type": "ordered",
                                "details": 
								[
                                    {
                                        "details": "Open <span class='resource'>create.msgflow</span>, and click the Flow Exerciser icon <img src='http://ot4i.github.io/ot4i.tutorials//dist/images/icons/iib/startFlowExerciser.png' alt='' /> to deploy and start testing the flow."
                                    },
                                    {
                                        "details": "Click the Send Message icon <img src='http://ot4i.github.io/ot4i.tutorials/dist/images/icons/iib/sendMessage.png' alt='' /> to select a message to send to the flow."
                                    },
                                    {
                                        "details": "Choose the input message (ie {'companyID':'103','company':'Barclays PLC','phone': '0800400100','price':171}) <span class='resource'>JSON message</span>, and click Send. Your request message is sent to the HTTP input node."
				                    },
				                    {
                                        "details": "A response should be shown, which includes an id that has been given to the document (ie you’ll get a reply with the id that the database has created for it ie {'id':'111111111111111111','companyID':'103','company':'Barclays PLC','phone':'0800400100','price':171})"
				                    },
				                    {
                                        "details": "After you close the dialog, the path taken through the messageflow is highlighted. Click on the message icon on each connection to see how the tree is updated by each node."
				                    },
				                    {
                                        "details": "Now that the database has been added to, when it is quieried it will be able to return an entry."
					                },
                                    {
                                        "details": "Open <span class='resource'>retrieve.msgflow</span>, and click the Flow Exerciser icon <img src='http://ot4i.github.io/ot4i.tutorials//dist/images/icons/iib/startFlowExerciser.png' alt='' /> to deploy and start testing the flow."
                                    },
                                    {
                                        "details": "Click the Send Message icon <img src='http://ot4i.github.io/ot4i.tutorials/dist/images/icons/iib/sendMessage.png' alt='' /> to select a message to send to the flow."
                                    },
                                    {
                                        "details": "Choose the input message (ie just '' will get all the items in the database) <span class='resource'>JSON message</span>, and click Send. Your request message is sent to the HTTP input node."
				                    },
				                    {
                                        "details": "A response should be shown, which lists the item that you've added previously"
				                    },
				                    {
                                        "details": "After you close the dialog, the path taken through the messageflow is highlighted. Click on the message icon on each connection to see how the tree is updated by each node."
				                    }
                                ]
                            }
                        },
			{
			    "section": "This tutorial shows the LoopBackRequest node being used to add records to a database and retrieve those entries. You can also use these applications to experiment with running a series of flow that make calls to different databases."
			}
                    ]
                },
                "helpLinks": 
				{
                    "title": "Find out more",
                    "details": 
					[
                        {
                            "title": "Basic introduction to using LoopBackRequest nodes ",
                            "description": "LoopBackRequest nodes Introduction",
                            "link": "https://developer.ibm.com/integration/blog/2016/09/01/basic-introduction-to-using-the-loopbackrequest-node/",
                            "type": "web"
                        },
                        {
                            "title": "More detailed LoopBackRequest Node tutorial",
                            "description": "LoopBackRequest node Tutorial",
                            "link": "https://developer.ibm.com/integration/blog/2016/10/13/iib-v10-0-0-6-loopback-request-node-tutorial/",
                            "type": "web"
                        }
                    ]
                },
				"exits": 
				{
					"title": "Run Exits",
					"details": 
					[
						{
							"name": "Clean Up",
							"description": "Clean up and remove any changes in your workspace made by the tutorial.",
							"method": "cleanUp()"
						}
					]
				}
            }
        }
    }
}